<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†–µ–∑—É–ª—å—Ç–∞—Ç</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <link rel="shortcut icon" href="static/favicon.png" />
</head>

<body class="bg-light d-flex align-items-center justify-content-center"
      style="height: 100vh;
             background-image: url('{{ url_for('static', filename=background) }}');
             background-size: cover;
             background-position: center;">

  <div class="text-center">
    {% if result_code not in codes_info %}
      <div class="complete-info">
        <h1 class="mb-4">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</h1>
        <p>–í–∞—à –∫–æ–¥ –æ—Ç –∑–∞–º–∫–∞:</p>
        <div class="display-4 fw-bold">{{ result_code }}</div>
      </div>

    {% else %}
      <div class="complete-info">
        <h1>{{ codes_info[result_code] }}</h1>
      </div>

    {% endif %}

    <form method="POST" action="{{ url_for('restart') }}" class="mt-5">
      <button type="submit" class="btn btn-outline-dark">–ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞</button>
    </form>
  </div>

  {% include "logout.html" %}

  <script>
      window.onload = function () {
          // –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –≤–æ–ª–Ω–æ–π
          var duration = 5 * 1000;
          var animationEnd = Date.now() + duration;
          var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 1000 };

          function randomInRange(min, max) {
              return Math.random() * (max - min) + min;
          }

          var interval = setInterval(function () {
              var timeLeft = animationEnd - Date.now();

              if (timeLeft <= 0) {
                  return clearInterval(interval);
              }

              var particleCount = 50 * (timeLeft / duration);
              // –∑–∞–ø—É—Å–∫ —Å –¥–≤—É—Ö —Å—Ç–æ—Ä–æ–Ω
              confetti(Object.assign({}, defaults, {
                  particleCount,
                  origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
              }));
              confetti(Object.assign({}, defaults, {
                  particleCount,
                  origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
              }));
          }, 250);
      }
  </script>

</body>
</html>